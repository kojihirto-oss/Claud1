# CLAUDE.md - プロジェクト規約

*このファイルはClaude Codeが読み込むプロジェクト規約です。*

---

## プロジェクト概要
<!-- プロジェクトの簡潔な説明を書く -->

## 技術スタック
- 言語: 
- フレームワーク: 
- テスト: 
- ビルド: 

---

## 許可された操作 ✅

### ファイル操作
- `WORK/` 配下のファイル作成・編集・削除
- `src/`, `tests/` 等の開発用ディレクトリへの書き込み
- 設定ファイルの編集（package.json, tsconfig.json 等）

### コマンド実行
- テスト実行: `npm test`, `pytest`, etc.
- lint実行: `npm run lint`, `ruff`, etc.
- ビルド: `npm run build`, etc.
- Git操作: `git add`, `git commit`, `git status`, `git diff`

### その他
- ドキュメント生成
- 依存関係の追加（package.json, requirements.txt）

---

## 禁止された操作 ❌（絶対に実行しない）

### ファイル操作
- `SSOT/` への書き込み
- `VAULT/` への書き込み
- `RELEASE/` への書き込み
- `.git/` の直接操作

### 危険なコマンド
- `rm -rf` （再帰的削除）
- `git reset --hard`
- `git push --force`
- `git clean -fd`
- `chmod -R` （再帰的権限変更）
- 本番環境への直接操作

### 禁止パターン
- **全域リライト**: ファイル全体を書き換えない。最小差分で修正する
- **無承認の自動実行**: 人間の確認なしにコマンドを連続実行しない
- **破壊的マイグレーション**: データを消す操作は事前承認必須

---

## 出力契約

### 実装時の必須出力
実装を行う場合は、必ず以下を出力すること：

1. **最小パッチ差分**
   - 変更理由を添える
   - 全域リライトではなく差分で提示

2. **影響範囲の説明**
   - 変更が及ぼす影響を明示
   - 依存ファイル、関連機能

3. **追加/更新テストの内容**
   - 新規テストケース
   - 既存テストの修正（必要な場合）

### 修理（REPAIR）時の出力
Verify失敗時は以下を出力：

1. 失敗原因の特定
2. 修正案（最短でGreenになる方法）
3. 再発防止策

---

## コンテキストの読み方

### 優先順位
1. `TICKET.md` - 今回のタスク仕様
2. `CONTEXT_PACK.md` - 入力情報の束（あれば）
3. `CLAUDE.md` - このファイル（プロジェクト規約）
4. 既存コード - スタイルを合わせる

### 仕様解釈のルール
- 曖昧な場合は質問する（勝手に解釈しない）
- 「非目的」に書かれたことはやらない
- 受入基準を満たすことを最優先

---

## コーディング規約

### 一般
- 既存コードのスタイルに合わせる
- マジックナンバーは定数化
- コメントは「なぜ」を書く（「何を」はコードで表現）

### 命名
<!-- プロジェクト固有の命名規則を書く -->

### エラーハンドリング
<!-- プロジェクト固有のエラー処理方針を書く -->

---

## よくある指示への対応

### 「このファイルを直して」
1. 問題を特定
2. 最小差分で修正
3. テストを追加/更新
4. 差分を提示

### 「新機能を追加して」
1. TICKET.md/CONTEXT_PACK.md を確認
2. 受入基準を満たす最小実装
3. テストを書く
4. 差分を提示

### 「リファクタリングして」
1. 変更範囲を限定（全域リライト禁止）
2. 動作を変えずに構造を改善
3. テストがGreenであることを確認
4. 段階的に提示（一度に全部やらない）

---

*Last updated: YYYY-MM-DD*
