# AI駆動開発ワークフロー Runbook

あなたは「AI駆動 開発ワークフロー設計者（人間作業最小化・最強AI割当担当）」です。本Runbookは、アイデアから運用改善までの全工程をAIが最大限回し切れるように、工程ごとに“最強のAI/ツール”を割り当て、可能な限りAIが自走して成果物を完成させ、人間作業を最小化する“具体手順（Runbook）”を定めたものです。

## 前提

- 各工程には、その工程で最も能力を発揮する「最強のAI」と、それを補佐する「補助AI」を割り当てています。
- Deep Researchは「探索」に活用し、最終提案は“再現性がある運用”として、出典・ログ・証跡が残る形で記述しています。
- 複数AIを並列運用する前提で、重複しない役割分担と統合方法まで含めています。
- 各工程は状態機械として定義され、Gate条件を満たすことで次の工程へ進みます。
- 事故を防ぐ観点（権限境界、秘密情報、プロンプト注入、ログ/証跡）を工程に埋め込んでいます。
- 使うツール（MCP/RAG/CLI/IDE/CI等）の扱いも工程の中に組み込んでいます。

## A) 1枚の全体マップ（工程一覧＋最強AI割当＋Gate＋証跡）

| 工程名 (状態機械) | 目的 | 入力 (テンプレ) | 出力 (テンプレ) | 担当AI (最強) | 補助AI | 使うツール | Gate (合否条件) | 残す証跡 (Evidence) | 人間がやる最小アクション |
| :----------------- | :--- | :--------------- | :--------------- | :-------------- | :----- | :--------- | :-------------- | :------------------ | :----------------------- |
| 1) IDEA可視化 | 要件/成功条件/制約/非目標の確定 | ユーザーのアイデア (自然言語) | IDEA可視化ドキュメント | GPT-5.2 | Claude 3.5 Sonnet | なし | 全員が要件に合意 | IDEA可視化ドキュメント (Markdown) | 最終承認 |
| 2) RESEARCH探索 | 一次情報確定 (公式/仕様) | IDEA可視化ドキュメント | RESEARCH探索レポート | Perplexity / Gemini 2.5 Pro | GPT-5.2 | Webブラウザ, RAG | 必要な一次情報が全て揃っている | 探索ログ, 参照URLリスト | 探索範囲の指示 |
| 3) FACTS固定 | Fact台帳の作成 | RESEARCH探索レポート | Fact台帳 | Gemini 2.5 Pro | DeepSeek-R1 | なし | Factの網羅性と正確性 | Fact台帳 (Markdown) | Factの最終確認 |
| 4) DESIGN作成 | 設計書の作成 (章立て→本文→ADR/判断点抽出) | Fact台帳 | 設計書 (Markdown) | Claude 3.5 Sonnet | GPT-5.2 | なし | 設計の網羅性、矛盾がないこと | 設計書 (Markdown), ADRs (Markdown) | 設計の最終承認 |
| 5) REVIEW多面監査 | 設計の矛盾/抜け/運用破綻/セキュリティ指摘 | 設計書 | 監査レポート (P0/P1/P2) | DeepSeek-R1 | Claude 3.5 Sonnet | なし | P0/P1指摘がないこと | 監査レポート (Markdown) | 監査結果の確認 |
| 6) BUILD実装 | 設計書に基づく実装とテスト | 設計書, 監査レポート | ソースコード, 単体テスト結果 | Claude Code / Cursor | GPT-5.2 | GitHub MCP, IDE, CI | 全ての単体テストがPASS | ソースコード, テストコード, テスト結果ログ | コードレビュー (差分のみ) |
| 7) VERIFY検証 | リンク/整合/未決ゼロ/危険操作検出/テスト | ソースコード, 設計書 | 検証レポート | GPT-5.2 (Test Gen) | Playwright MCP | Playwright MCP, CI | 全ての検証項目がPASS | 検証レポート (Markdown), E2Eテスト結果ログ | 検証結果の最終承認 |
| 8) REPAIR修正ループ | 原因分析→修正→再検証 | 検証レポート, ソースコード | 修正済みソースコード, 再検証結果 | Claude Code | DeepSeek-R1 | GitHub MCP, IDE, CI | 再検証がPASS (最大3回) | 修正コミットログ, 再検証結果ログ | 3回失敗時の介入 |
| 9) RELEASEリリース | 検証済みのシステムを本番環境にデプロイし、リリースノートを自動生成・公開する。 | 修正済みソースコード, 検証レポート | デプロイログ, リリースノート, ヘルスチェックログ | GPT-5.2 | GitHub Actions | CI/CD (GitHub Actions), GitHub MCP | デプロイ成功, ヘルスチェックPASS, リリースノート公開 | デプロイログ, リリースノート, ヘルスチェックログ | リリースの最終承認 |
| 10) IMPROVE運用改善 | 本番環境の稼働データ (ログ、メトリクス、ユーザーフィードバック) を継続的に監視・分析し、改善点を特定・起票する。これにより、次の開発サイクルに繋げる。 | 監視データ, ユーザーフィードバック | 分析レポート, 起票されたIssue | Gemini 2.5 Pro | DeepSeek-R1 | 監視/ログ分析ツール, GitHub MCP | データ収集・分析, Issue起票 | 監視ダッシュボード, 分析レポート, 起票されたIssue | 改善の優先順位付け |

## B) 工程別Runbook

### 1) IDEA可視化

- **工程名**: IDEA可視化
- **目的**: ユーザーのアイデアから、要件、成功条件、制約、非目標を明確にし、プロジェクトの方向性を確定する。
- **担当AI**: **GPT-5.2** (最強) / 補助AI: Claude 3.5 Sonnet
    - **理由**: GPT-5.2は、複雑な自然言語の意図を正確に解釈し、論理的な整合性を保ちながら多角的な視点から要件を抽出する能力に優れている。特に、曖昧な表現から潜在的な制約や非目標を特定する推論能力が高い。
- **使うツール**: なし (主にAIの対話能力とユーザーからのインプット)
- **Gate (合否条件)**:
    - 抽出された要件、成功条件、制約、非目標が全て明確であり、矛盾がないこと。
    - プロジェクト関係者全員が、可視化されたIDEAドキュメントの内容に合意すること。
    - 非目標が明確に定義され、スコープクリープのリスクが最小化されていること。
- **残す証跡 (Evidence)**:
    - IDEA可視化ドキュメント (Markdown形式)
    - ユーザーとの合意を示す承認ログ (例: GitHub Issueのコメント、Slackの承認スタンプなど)
- **人間がやる最小アクション**: 最終承認

### 具体手順

まず、ユーザーはプロジェクトのアイデアを自然言語でAIに提示します。これを受けて、**GPT-5.2**はユーザーのアイデアから、プロジェクトの目的 (What)、達成したい成果 (Why)、主要な機能 (How)、ターゲットユーザー (Who)、期待される価値 (Value) といった初期要件を抽出します。次に、抽出された目的と成果に基づき、プロジェクトの成功を測る具体的な指標 (KPI) や条件を定義します。さらに、ユーザーのアイデアや一般的な開発プロセスから、技術的、予算的、時間的、法的、運用上の制約を洗い出し、プロジェクトのスコープ外となる事項や意図的に達成しない目標である非目標を明確にすることで、将来的なスコープクリープを防ぎます。

抽出された要件、成功条件、制約、非目標は、補助AIである**Claude 3.5 Sonnet**によってクロスチェックされます。Claude 3.5 Sonnetは、抜け漏れ、矛盾、曖昧な表現、実現可能性に疑問がある点がないかをレビューします。このクロスチェックの結果を踏まえ、**GPT-5.2**は「IDEA可視化ドキュメント」をMarkdown形式で生成します。このドキュメントには、要件、成功条件、制約、非目標の各セクションが設けられ、各項目は箇条書きや表形式で分かりやすく記述されます。

生成されたIDEA可視化ドキュメントは人間がレビューし、不明点や追加の要望があればAIにフィードバックします。フィードバックに基づき、**GPT-5.2**がドキュメントを修正します。修正後のドキュメントがGate条件 (要件の明確性、矛盾のなさ、関係者合意) を満たしているかAIが自動判定し、満たさない場合は人間によるレビューとフィードバックのステップに戻ります。Gate判定をPASSした場合、人間が最終的な承認を行い、この工程は完了となります。最終承認されたIDEA可視化ドキュメントと承認ログは、指定されたリポジトリ (例: GitHub) にコミットされ、証跡として記録されます。

### 2) RESEARCH探索

- **工程名**: RESEARCH探索
- **目的**: IDEA可視化で確定した要件に基づき、必要な一次情報 (公式ドキュメント、API仕様、技術記事など) を網羅的に収集し、その後の設計・実装の基盤を確立する。
- **担当AI**: **Perplexity / Gemini 2.5 Pro** (最強) / 補助AI: GPT-5.2
    - **理由**: Perplexityは、Web検索とLLMの統合により、最新かつ信頼性の高い情報源を特定し、要約する能力に優れている。Gemini 2.5 Proは、広大なコンテキストウィンドウとマルチモーダル能力により、多様な形式の情報を効率的に処理し、関連性を判断できる。両者で網羅性と深掘りを両立させる。
- **使うツール**: Webブラウザ (検索、情報収集), RAG (Retrieval Augmented Generation) システム (情報整理、関連性評価)
- **Gate (合否条件)**:
    - 収集された情報が、IDEA可視化ドキュメントの要件を全てカバーしていること。
    - 参照元が公式ドキュメント、一次情報、信頼性の高い技術ブログなどに限定されていること。
    - 探索範囲外の情報や、信頼性の低い情報が混入していないこと。
    - 収集された情報に重大な矛盾がないこと。
- **残す証跡 (Evidence)**:
    - RESEARCH探索レポート (Markdown形式、参照URLリスト、各情報の要約)
    - 探索ログ (検索クエリ、アクセスしたURL、取得日時)
- **人間がやる最小アクション**: 探索範囲の指示 (必要に応じて)

### 具体手順

前工程で確定したIDEA可視化ドキュメントをRESEARCH探索の入力とします。まず、**Perplexity**がIDEA可視化ドキュメントからキーワードを抽出し、広範囲なWeb検索を実行します。特に、公式ドキュメント、APIリファレンス、主要な技術ブログ、学術論文などを優先的に探索します。Perplexityで得られた初期結果を基に、**Gemini 2.5 Pro**が各情報源にアクセスし、内容を詳細に分析します。この際、APIの具体的な仕様と利用方法、関連する技術スタックの選定基準とベストプラクティス、既存の類似ソリューションや競合技術の調査、セキュリティに関する考慮事項といった点を重視します。

収集した情報はRAGシステムに投入され、関連性の高い情報をグルーピングし、重複を排除することで効率的に整理されます。RAGは、AIが参照すべき情報源を効率的に提示する役割を担います。補助AIである**GPT-5.2**は、RAGシステムで整理された情報を要約し、IDEA可視化ドキュメントの各要件との関連性を評価します。不足している情報があれば、追加の探索を指示します。収集した全ての情報源について、URL、参照日、可能であれば更新日、簡単な内容説明を含む参照URLリストを作成します。

**Gemini 2.5 Pro**は、収集した情報、要約、関連性評価、参照URLリストを統合し、Markdown形式のRESEARCH探索レポートを生成します。AIがRESEARCH探索レポートを基にGate条件 (情報の網羅性、信頼性、矛盾のなさ) を自動判定し、満たさない場合は初期探索のステップに戻り、追加探索を行います。AIの探索が特定の領域で不足している、または過剰であると判断された場合、人間が探索範囲を調整する指示を出すことがあります。最終的に承認されたRESEARCH探索レポートと探索ログは、指定されたリポジトリにコミットされ、証跡として記録されます。

### 3) FACTS固定

- **工程名**: FACTS固定
- **目的**: RESEARCH探索で収集した情報の中から、プロジェクトの基盤となる「Fact」を抽出し、出典、参照日、更新日、引用範囲、適用範囲を明確にした「Fact台帳」を作成する。これにより、設計・実装の揺らぎを防ぎ、再現性を保証する。
- **担当AI**: **Gemini 2.5 Pro** (最強) / 補助AI: DeepSeek-R1
    - **理由**: Gemini 2.5 Proは、広大なコンテキストウィンドウを活かし、RESEARCH探索レポート内の長文から正確な情報を抽出し、構造化する能力に優れている。特に、出典との紐付けや引用範囲の特定において高い精度を発揮する。DeepSeek-R1は、論理的な整合性チェックと、潜在的な誤解釈の指摘に強みを持つ。
- **使うツール**: なし (主にAIのテキスト処理能力)
- **Gate (合否条件)**:
    - Fact台帳の全てのFactが出典と正確に紐付けられていること。
    - 各Factの引用範囲と適用範囲が明確に定義されていること。
    - Fact間に矛盾がなく、一貫性が保たれていること。
    - Fact台帳がIDEA可視化ドキュメントの要件を全てサポートしていること。
- **残す証跡 (Evidence)**:
    - Fact台帳 (Markdown形式)
- **人間がやる最小アクション**: Factの最終確認

### 具体手順

前工程で確定したRESEARCH探索レポートをFACTS固定の入力とします。**Gemini 2.5 Pro**は、このレポートの内容を精査し、プロジェクトの設計・実装に不可欠な「Fact」を抽出します。抽出されるFactには、具体的な情報内容に加え、出典、参照日、可能であれば更新日、出典ドキュメント内の具体的なセクションや引用テキストを示す引用範囲、そしてそのFactがプロジェクトのどの部分に適用されるかを示す適用範囲が含まれます。

抽出されたFact群は、補助AIである**DeepSeek-R1**によって整合性チェックが行われます。DeepSeek-R1は、Fact間に論理的な矛盾がないか、誤解釈の余地がないか、出典との紐付けが正確か、引用範囲が適切かといった観点でレビューします。このチェックを経て、**Gemini 2.5 Pro**は、抽出・チェックされたFactを基に、Markdown形式の「Fact台帳」を表形式で生成します。

生成されたFact台帳は人間がレビューし、内容の正確性、網羅性、一貫性を確認します。不明点や修正点があればAIにフィードバックし、**Gemini 2.5 Pro**がこれを修正します。修正後のFact台帳がGate条件 (出典との紐付け、引用/適用範囲の明確性、矛盾のなさ) を満たしているかAIが自動判定し、満たさない場合は人間による最終確認のステップに戻ります。Gate判定をPASSした場合、最終的に承認されたFact台帳は、指定されたリポジトリにコミットされ、証跡として記録されます。

### 4) DESIGN作成

- **工程名**: DESIGN作成
- **目的**: Fact台帳に基づき、システムの全体設計、詳細設計、データ設計、UI/UX設計など、開発に必要な全ての設計書を作成する。また、設計上の重要な判断点 (ADR: Architectural Decision Record) を抽出し、記録する。
- **担当AI**: **Claude 3.5 Sonnet** (最強) / 補助AI: GPT-5.2
    - **理由**: Claude 3.5 Sonnetは、長文の構造化されたドキュメント作成、特に設計書のような体系的な記述において高い能力を発揮する。複数のFactを統合し、一貫性のある設計思想を反映させる推論力に優れる。ADRの抽出と形式化も得意とする。GPT-5.2は、設計の論理的整合性チェックと、代替案の提案に強みを持つ。
- **使うツール**: なし (主にAIのドキュメント生成能力)
- **Gate (合否条件)**:
    - 設計書がFact台帳の全てのFactを適切に反映していること。
    - 設計書に矛盾がなく、一貫性が保たれていること。
    - 全ての主要な設計判断点についてADRが作成されていること。
    - 設計書が、次の実装工程に進むために十分な詳細度を持っていること。
- **残す証跡 (Evidence)**:
    - 設計書 (Markdown形式)
    - ADRs (Markdown形式)
- **人間がやる最小アクション**: 設計の最終承認

### 具体手順
前工程で確定したFact台帳をDESIGN作成の入力とします。まず、**Claude 3.5 Sonnet**はFact台帳とIDEA可視化ドキュメントに基づき、設計書の最適な章立て (例: 概要、システム構成、データモデル、API仕様、UI/UX、セキュリティ設計など) を生成します。次に、各章立てに従い、Fact台帳の情報を参照しながら設計書の本文を執筆します。この際、システムの全体像と各コンポーネントの役割、データ構造とデータフロー、外部システムとの連携方法、エラーハンドリングとロギングの戦略、セキュリティ要件と対策、運用上の考慮事項などが詳細に記述されます。

設計の過程で発生した重要な判断点 (例: 特定の技術スタックの選択理由、トレードオフの考慮、代替案の検討結果など) は、**Claude 3.5 Sonnet**によって抽出され、ADR (Architectural Decision Record) としてMarkdown形式で記述されます。ADRには、判断の概要、判断が必要となった背景、最終的な決定事項、その決定に至った理由と考慮したトレードオフ、検討された他の選択肢、そしてその決定がシステム全体に与える影響が含まれます。

生成された設計書とADRは、補助AIである**GPT-5.2**によって論理的整合性チェックが行われます。GPT-5.2は、Fact台帳との乖離、設計書内の矛盾、各コンポーネント間のインターフェースの明確性、セキュリティ上の脆弱性につながる設計、運用上の問題を引き起こす可能性がないかといった観点でレビューします。このフィードバックに基づき、**Claude 3.5 Sonnet**が設計書とADRを修正します。

修正後の設計書とADRがGate条件 (Factの反映、矛盾のなさ、ADRの網羅性、詳細度) を満たしているかAIが自動判定し、満たさない場合はGPT-5.2によるチェックのステップに戻ります。Gate判定をPASSした場合、人間が最終的な承認を行い、この工程は完了となります。最終承認された設計書とADRは、指定されたリポジトリにコミットされ、証跡として記録されます。

### 5) REVIEW多面監査

- **工程名**: REVIEW多面監査
- **目的**: DESIGN作成で生成された設計書に対し、別AIが多角的な視点から監査を行い、矛盾、抜け漏れ、運用破綻リスク、セキュリティ脆弱性などを指摘する。指摘事項は重大度 (P0/P1/P2) を付与する。
- **担当AI**: **DeepSeek-R1** (最強) / 補助AI: Claude 3.5 Sonnet
    - **理由**: DeepSeek-R1は、高度な論理的推論能力と厳密な形式検証に強みを持つ。設計書のような複雑な構造を持つドキュメントから、潜在的な矛盾やエッジケース、セキュリティ上の欠陥を徹底的に洗い出すことができる。Claude 3.5 Sonnetは、人間が理解しやすい形式で指摘事項を整理し、レポート化する能力に優れる。
- **使うツール**: なし (主にAIの論理的推論能力)
- **Gate (合否条件)**:
    - 監査レポートにP0 (致命的) およびP1 (重大) の指摘がないこと。
    - P2 (軽微) の指摘は、全て対応方針が決定されていること。
    - 監査レポートの内容が、設計書の内容と正確に対応していること。
- **残す証跡 (Evidence)**:
    - 監査レポート (Markdown形式、指摘事項、重大度、対応方針)
- **人間がやる最小アクション**: 監査結果の確認、P2指摘への対応方針決定

### 具体手順

前工程で確定した設計書とADRをREVIEW多面監査の入力とします。**DeepSeek-R1**は、設計書全体を精査し、以下の観点で矛盾や抜け漏れ、運用破綻リスク、セキュリティ脆弱性を監査します。

まず、Fact台帳との整合性、設計書内の各セクション間の整合性、要件 (IDEA可視化ドキュメント) の網羅性、エッジケースや異常系の考慮不足といった観点から、矛盾や抜け漏れを監査します。次に、スケーラビリティ、パフォーマンス、可用性に関する問題点、監視、ログ収集、障害復旧の考慮不足、メンテナンス性、拡張性に関する問題点といった運用上の潜在的なリスクを特定します。さらに、認証・認可の設計不備、データ保護・暗号化の考慮不足、外部連携におけるセキュリティリスク、既知の脆弱性パターン (OWASP Top 10など) との照合を通じて、セキュリティ上の脆弱性につながる可能性のある設計を特定します。

検出された指摘事項に対し、**DeepSeek-R1**は以下の基準で重大度 (P0/P1/P2) を付与します。

- **P0 (致命的)**: システムの稼働停止、データ損失、重大なセキュリティ侵害に直結する問題。
- **P1 (重大)**: システムの主要機能に影響、データ整合性の問題、中程度のセキュリティリスク、運用に大きな支障をきたす問題。
- **P2 (軽微)**: 軽微な機能不備、改善の余地、運用効率の低下、低程度のセキュリティリスク。

補助AIである**Claude 3.5 Sonnet**は、DeepSeek-R1が検出した指摘事項と重大度を基に、Markdown形式の「監査レポート」を生成します。レポートは、指摘事項ごとに詳細な説明、影響、推奨される修正案を含みます。

生成された監査レポートは人間がレビューし、P0およびP1の指摘がないことを確認します。P2の指摘については、対応方針 (修正、許容、将来対応など) を決定し、AIにフィードバックします。人間からのフィードバックに基づき、**Claude 3.5 Sonnet**が監査レポートにP2指摘への対応方針を追記します。更新された監査レポートがGate条件 (P0/P1指摘がないこと、P2指摘への対応方針決定) を満たしているかAIが自動判定し、満たさない場合は人間による確認のステップに戻ります。Gate判定をPASSした場合、最終的に承認された監査レポートは、指定されたリポジトリにコミットされ、証跡として記録されます。

### 6) BUILD実装

- **工程名**: BUILD実装
- **目的**: 設計書と監査レポートに基づき、ソースコードを記述し、単体テストを実装・実行する。CI/CDパイプラインと連携し、自動化された開発プロセスを確立する。
- **担当AI**: **Claude Code / Cursor (Claude 3.5)** (最強) / 補助AI: GPT-5.2
    - **理由**: Claude Codeは、CLIベースで自律的にコードを生成・修正・テストできる強力なコーディングエージェントである。Cursorは、AIネイティブなIDEとして、開発者がAIと協調しながら効率的にコードを書くことを支援する。両者で、コード品質と開発速度を最大化する。GPT-5.2は、複雑なロジックの設計や、既存コードベースの解析に強みを持つ。
- **使うツール**: GitHub MCP (コード管理、PR作成), IDE (Cursor), CI (GitHub Actions), CLI (Claude Code)
- **Gate (合否条件)**:
    - 全ての単体テストがPASSすること。
    - コードカバレッジが設定された閾値 (例: 80%) を満たしていること。
    - 静的コード解析ツール (Linter, Formatter) のチェックをPASSすること。
    - 設計書に記載された機能が全て実装されていること。
- **残す証跡 (Evidence)**:
    - ソースコード (GitHubリポジトリ)
    - 単体テストコード
    - テスト結果ログ (CI/CDパイプラインの実行ログ)
    - コードカバレッジレポート
- **人間がやる最小アクション**: コードレビュー (差分のみ)

### 具体手順

前工程で確定した設計書と監査レポートをBUILD実装の入力とします。まず、**Claude Code**は設計書を解析し、実装すべき機能を具体的なタスクリストに分割します。各タスクは独立して実装・テスト可能な粒度とします。次に、分割されたタスクに基づき、設計書に忠実であること、コーディング規約に従うこと、適切なコメントとドキュメンテーションを含めること、セキュリティ上のベストプラクティスを適用することを考慮しながら、ソースコードを生成します。生成されたソースコードに対し、**Claude Code**は対応する単体テストコードも生成し、各機能が設計通りに動作することを確認します。

必要に応じて、Cursor (AIネイティブIDE) を使用し、人間がAIと協調しながらコードの微調整やデバッグを行います。AIはリアルタイムでコード補完、エラー検出、リファクタリングの提案を行います。**Claude Code**は、生成・修正されたソースコードと単体テストコードをGitHubリポジリにコミットし、プルリクエスト (PR) を作成します。PRには、実装内容の概要、関連する設計書へのリンク、テスト結果のサマリーを含めます。

PRが作成されると、CI (GitHub Actions) が自動的にトリガーされ、単体テストの実行、コードカバレッジの計測、静的コード解析 (Linter, Formatter) の実行といったテストが実行されます。補助AIである**GPT-5.2**は、CIの結果とコードの差分を基に、設計意図との乖離、潜在的なバグ、パフォーマンス問題、セキュリティ脆弱性などを指摘するコードレビューコメントを生成し、人間によるレビューを支援します。人間は、GPT-5.2のレビューコメントを参考に、コードの差分のみに焦点を当ててレビューを行い、承認または修正指示をGitHubのPRコメントとして残します。レビューコメントに基づき、**Claude Code**がコードを修正し、再度コミットとPR更新を行います。このプロセスはGate条件を満たすまで繰り返されます。

CIの全てのチェックがPASSし、コードカバレッジが設定された閾値を超え、人間によるレビューが承認された場合、AIがGate条件を満たしたと判定します。最終的に承認されマージされたソースコード、単体テストコード、CIの実行ログ、コードカバレッジレポートはGitHubリポジリに証跡として記録されます。

### 7) VERIFY検証

- **工程名**: VERIFY検証
- **目的**: 実装されたシステムが、IDEA可視化ドキュメントの要件、設計書の仕様、監査レポートの指摘事項への対応を全て満たしていることを確認する。リンクの整合性、データ整合性、未決事項のゼロ化、危険操作の検出、E2Eテストなどを実施する。
- **担当AI**: **GPT-5.2 (Test Gen)** (最強) / 補助AI: Playwright MCP
    - **理由**: GPT-5.2は、要件定義から設計書、コードまでを総合的に理解し、網羅的かつ厳格なテストケースを生成する能力に優れている。特に、未決事項の特定や危険操作のシナリオ作成において高い推論力を発揮する。Playwright MCPは、ブラウザを介したE2Eテストの自動実行とUI検証を可能にし、実際のユーザー体験に近い検証を実現する。
- **使うツール**: Playwright MCP (E2Eテスト自動化), CI (GitHub Actions)
- **Gate (合否条件)**:
    - 全ての検証項目がPASSすること。
    - 未決事項 (Open Issues) がゼロであること。
    - 危険操作シナリオが全て検出され、適切に処理されること。
    - E2Eテストが全てPASSすること。
- **残す証跡 (Evidence)**:
    - 検証レポート (Markdown形式、各検証項目の結果、E2Eテスト結果のサマリー)
    - E2Eテスト実行ログ、スクリーンショット、動画 (Playwright MCP出力)
- **人間がやる最小アクション**: 検証結果の最終承認

### 具体手順
前工程で確定したソースコード、設計書、IDEA可視化ドキュメント、監査レポートをVERIFY検証の入力とします。**GPT-5.2**は、IDEA可視化ドキュメントの要件、設計書の仕様、監査レポートの指摘事項への対応状況を基に、以下の検証項目を網羅的に生成します。

生成される検証項目には、各機能が期待通りに動作するかを確認する機能要件の検証、パフォーマンス、セキュリティ、可用性などを確認する非機能要件の検証、内部リンクや外部リンクが正しく機能するかを確認するリンクの整合性検証、データベースとの連携やデータのCRUD操作が正しいかを確認するデータ整合性検証、GitHub Issuesなどで管理されている未決事項が全てクローズされているかを確認する未決事項のゼロ化検証、そして不正な入力、権限外操作、大量リクエストなどに対するシステムの挙動を確認する危険操作シナリオの検出と検証が含まれます。

生成された検証項目に基づき、**GPT-5.2**はPlaywright MCPで実行可能なE2Eテストシナリオを記述します。このシナリオは、ユーザーの操作フローを模倣し、UIの挙動やバックエンドの連携を検証します。CI (GitHub Actions) がトリガーされると、Playwright MCPが生成されたE2Eテストシナリオを自動実行し、テスト実行中にスクリーンショットや動画を記録します。

**GPT-5.2**は、E2Eテストの実行ログ、スクリーンショット、動画を分析し、各検証項目のPASS/FAILを判定します。特に、危険操作シナリオが正しく検出・処理されたかを確認します。全ての検証結果を統合し、Markdown形式の「検証レポート」を生成します。レポートには、各検証項目の結果、E2Eテストのサマリー、検出された問題点、未決事項のリストを含めます。

AIが検証レポートを基にGate条件 (全ての検証項目PASS、未決事項ゼロ、危険操作検出) を自動判定し、満たさない場合はREPAIR修正ループ工程に進みます。Gate判定をPASSした場合、人間が検証レポートの内容を確認し、最終的な承認を行い、この工程は完了となります。最終承認された検証レポート、E2Eテスト実行ログ、スクリーンショット、動画は、指定されたリポジトリにコミットされ、証跡として記録されます。

### 8) REPAIR修正ループ

- **工程名**: REPAIR修正ループ
- **目的**: VERIFY検証工程で検出された問題点 (バグ、設計との乖離、未決事項など) の原因を分析し、修正を行い、再検証する。このループは最大3回までとし、解決しない場合は人間が介入する。
- **担当AI**: **Claude Code** (最強) / 補助AI: DeepSeek-R1
    - **理由**: Claude Codeは、コードベース全体を理解し、検証レポートから具体的な修正箇所を特定し、効率的にパッチを適用する能力に優れている。修正後の単体テストも自動生成・実行できるため、迅速な修正サイクルを実現する。DeepSeek-R1は、複雑な問題の原因分析や、修正による副作用の予測に強みを持つ。
- **使うツール**: GitHub MCP (コード管理、PR作成), IDE (Cursor), CI (GitHub Actions)
- **Gate (合否条件)**:
    - 修正後の再検証が全てPASSすること。
    - 新たな問題が発生していないこと (回帰テストのPASS)。
    - 修正が設計意図と合致していること。
    - 修正ループが最大3回を超えていないこと。
- **残す証跡 (Evidence)**:
    - 修正コミットログ (GitHub)
    - 再検証結果ログ (CI/CDパイプラインの実行ログ)
    - 修正履歴 (PRコメント、Issue更新)
- **人間がやる最小アクション**: 3回失敗時の介入

### 具体手順

VERIFY検証工程で検出された問題点を含む検証レポートと、現在のソースコードをREPAIR修正ループの入力とします。補助AIである**DeepSeek-R1**は、検証レポートの内容とソースコードを詳細に分析し、問題の根本原因を特定します。必要に応じて、ログファイルやエラーメッセージも参照します。この原因分析に基づき、**Claude Code**が具体的な修正計画を立案します。修正計画には、修正対象ファイル、修正内容、影響範囲、単体テストの追加・修正などが含まれます。

**Claude Code**は、修正計画に基づき、ソースコードを修正します。修正後、関連する単体テストコードを更新または新規作成し、修正が意図通りに機能することを確認します。修正されたコードはGitHubリポジトリにコミットされ、プルリクエスト (PR) が更新されます。CI (GitHub Actions) が自動的にトリガーされ、単体テスト、コードカバレッジ、静的コード解析が再度実行されます。

補助AIである**DeepSeek-R1**は、CIの結果とコードの差分を基に、修正が問題の根本原因を解決しているか、新たな問題 (回帰バグ) を引き起こしていないか、設計意図と合致しているかなどをレビューします。このレビュー結果は、人間による最終確認の前に、AIがGate条件 (再検証PASS、新たな問題なし、設計意図との合致) を自動判定するために使用されます。AIによるGate判定をPASSした場合、修正ループは完了し、次の工程に進みます。修正ループが3回失敗した場合、人間が介入し、根本的な原因分析と修正方針の再検討を行います。最終的に承認されマージされた修正コード、再検証結果ログ、修正履歴は、指定されたリポジトリに証跡として記録されます。

### 9) RELEASEリリース

- **工程名**: RELEASEリリース
- **目的**: 検証済みのシステムを本番環境にデプロイし、リリースノートを自動生成・公開する。
- **担当AI**: **GPT-5.2** (最強) / 補助AI: GitHub Actions
    - **理由**: GPT-5.2は、コミットログやPRの情報を基に、人間が理解しやすい形式のリリースノートを自動生成する能力に優れている。GitHub Actionsは、承認されたコードを自動的に本番環境にデプロイするプロセスを担う。
- **使うツール**: CI/CD (GitHub Actions), GitHub MCP (リリースノート生成)
- **Gate (合否条件)**:
    - 本番環境へのデプロイが正常に完了すること。
    - リリース後のヘルスチェック (死活監視、主要機能の疎通確認) がPASSすること。
    - リリースノートが生成され、公開されていること。
- **残す証跡 (Evidence)**:
    - デプロイログ (CI/CDパイプラインの実行ログ)
    - リリースノート (GitHub Releases)
    - 本番環境のヘルスチェックログ
- **人間がやる最小アクション**: リリースの最終承認

### 具体手順

REPAIR修正ループが完了し、全ての検証をPASSしたコードがmainブランチにマージされると、人間がリリースの最終承認を行います。承認後、**GitHub Actions**のリリースワークフローがトリガーされます。このワークフローは、まずプロジェクトをビルドし、本番環境用のコンテナイメージを作成します。次に、作成されたコンテナイメージを本番環境にデプロイします。デプロイ完了後、自動化されたヘルスチェックが実行され、システムの正常性を確認します。

デプロイとヘルスチェックが成功すると、**GPT-5.2**がGitHub MCPを通じて、前回のリリースから今回のリリースまでのコミットログとPRの情報を収集します。収集した情報を基に、新機能、改善点、バグ修正などのカテゴリに分類し、人間が理解しやすい言葉で記述したリリースノートを自動生成します。生成されたリリースノートは、GitHub Releasesに公開されます。

AIがGate条件 (デプロイ成功、ヘルスチェックPASS、リリースノート公開) を自動判定し、満たさない場合は人間にアラートを通知し、ロールバック処理を実行します。Gate判定をPASSした場合、リリース工程は完了となります。デプロイログ、リリースノート、ヘルスチェックログは、それぞれGitHub ActionsとGitHub Releasesに証跡として記録されます。

### 10) IMPROVE運用改善

- **工程名**: IMPROVE運用改善
- **目的**: 本番環境の稼働データ (ログ、メトリクス、ユーザーフィードバック) を継続的に監視・分析し、改善点を特定・起票する。これにより、次の開発サイクルに繋げる。
- **担当AI**: **Gemini 2.5 Pro** (最強) / 補助AI: DeepSeek-R1
    - **理由**: Gemini 2.5 Proは、大量の時系列データ (ログ、メトリクス) と非構造化データ (ユーザーフィードバック) を統合的に分析し、異常検知や改善点の根本原因を特定する能力に優れている。DeepSeek-R1は、分析結果から具体的な改善提案を論理的に構築し、次のIDEA可視化工程に繋がるIssueを起票する。
- **使うツール**: 監視ツール (Datadog, Prometheusなど), ログ分析ツール (Splunk, ElasticSearchなど), GitHub MCP (Issue起票)
- **Gate (合否条件)**:
    - 監視データが継続的に収集・分析されていること。
    - 重要なアラートや異常が検出された場合、Issueが起票されていること。
    - ユーザーフィードバックが定期的にレビューされ、改善点としてIssue化されていること。
- **残す証跡 (Evidence)**:
    - 監視ダッシュボード (URL)
    - 分析レポート (Markdown形式)
    - 起票されたIssue (GitHub Issues)
- **人間がやる最小アクション**: 改善の優先順位付け

### 具体手順

本番環境にデプロイされたシステムから、監視ツールを通じてログやメトリクス (CPU使用率、メモリ使用率、リクエスト数、エラーレートなど) を継続的に収集します。**Gemini 2.5 Pro**は、これらのデータをリアルタイムで分析し、異常なパターンやパフォーマンスのボトルネック、エラーの急増などを検出します。また、ユーザーから寄せられるフィードバック (問い合わせ、要望、不具合報告など) を分析し、改善のヒントを抽出します。

異常が検出された場合、または重要なユーザーフィードバックが得られた場合、補助AIである**DeepSeek-R1**がその根本原因を分析します。分析結果に基づき、具体的な改善提案を立案し、GitHub MCPを通じてGitHubリポジトリにIssueを起票します。起票されるIssueには、問題の概要、再現手順、期待される挙動、推奨される修正方針などが含まれます。

人間は、起票されたIssueを確認し、ビジネスインパクトや緊急度を考慮して改善の優先順位を決定します。優先順位付けされたIssueは、次の開発サイクルの「IDEA可視化」工程のインプットとなり、継続的な改善ループが形成されます。この工程は定常的に実行され、明確な完了条件はありませんが、Gate条件 (データ収集・分析、Issue起票) を満たしているかを定期的にAIが自己評価します。監視ダッシュボードのURL、定期的な分析レポート、起票されたIssueは、プロジェクトの共有スペース (例: Confluence, Notion) に証跡として記録されます。

## C) 各工程の入力テンプレ/出力テンプレ（コピペ用）

### 1) IDEA可視化

#### 入力テンプレ

```markdown
# プロジェクトアイデア

## 概要
[プロジェクトのアイデアを自由に記述してください。どのような課題を解決したいか、どのようなものを作りたいかなど。]

## 期待する成果
[このプロジェクトで達成したい具体的な成果や目標を記述してください。]

## 想定するユーザー
[誰がこのシステムを利用するか、そのユーザーの特性やニーズを記述してください。]

## その他
[その他、AIに伝えたい情報や考慮してほしい点があれば記述してください。]
```

#### 出力テンプレ

```markdown
# IDEA可視化ドキュメント

## 1. プロジェクト概要
[AIがユーザーのアイデアを要約し、プロジェクトの全体像を記述します。]

## 2. 要件 (Requirements)

### 2.1. 機能要件
- [機能1の記述]
- [機能2の記述]

### 2.2. 非機能要件
- パフォーマンス: [例: レスポンスタイム3秒以内]
- セキュリティ: [例: OWASP Top 10への対応]
- 可用性: [例: 稼働率99.9%]
- 運用性: [例: ログの一元管理]

## 3. 成功条件 (Success Criteria)

### 3.1. ビジネス成功条件
- [例: ユーザー登録数1000人/月]
- [例: コンバージョン率5%]

### 3.2. 技術的成功条件
- [例: 全ての単体テストがPASSする]
- [例: コードカバレッジ80%以上]

## 4. 制約 (Constraints)

### 4.1. 技術的制約
- [例: 特定のクラウドプロバイダーの利用]
- [例: 特定のプログラミング言語の利用]

### 4.2. 予算・時間的制約
- [例: 開発期間3ヶ月]
- [例: 開発予算100万円]

### 4.3. 法的・規制的制約
- [例: 個人情報保護法への準拠]

## 5. 非目標 (Non-Goals)
- [例: モバイルアプリの開発は今回のスコープ外とする]
- [例: 多言語対応はフェーズ2以降とする]

## 6. 承認ログ
- 承認者: [承認者の名前]
- 承認日: [YYYY-MM-DD]
- コメント: [承認コメント]
```

### 2) RESEARCH探索

#### 入力テンプレ

```markdown
# RESEARCH探索指示

## 1. 探索対象の要件
[IDEA可視化ドキュメントから、探索が必要な要件を具体的に記述してください。]

## 2. 探索の目的
[この探索でどのような情報を得たいか、その目的を記述してください。]

## 3. 探索範囲 (任意)
[特定の技術、API、ドメインなどに探索範囲を限定したい場合に記述してください。]

## 4. 優先する情報源 (任意)
[公式ドキュメント、特定の技術ブログなど、優先的に参照してほしい情報源があれば記述してください。]
```

#### 出力テンプレ

```markdown
# RESEARCH探索レポート

## 1. 探索概要
[探索の目的と結果の要約を記述します。]

## 2. 収集情報リスト

### 2.1. API仕様
- **名称**: [API名]
  - **概要**: [APIの簡単な説明]
  - **参照URL**: [公式ドキュメントURL]
  - **参照日**: [YYYY-MM-DD]
  - **更新日**: [YYYY-MM-DD (不明な場合は「不明」)]
  - **関連要件**: [IDEA可視化ドキュメントの関連要件]

### 2.2. 技術スタック
- **名称**: [技術スタック名]
  - **概要**: [技術スタックの簡単な説明]
  - **参照URL**: [公式ドキュメントURL]
  - **参照日**: [YYYY-MM-DD]
  - **更新日**: [YYYY-MM-DD (不明な場合は「不明」)]
  - **関連要件**: [IDEA可視化ドキュメントの関連要件]

### 2.3. ベストプラクティス
- **テーマ**: [テーマ名]
  - **概要**: [ベストプラクティスの簡単な説明]
  - **参照URL**: [記事URL]
  - **参照日**: [YYYY-MM-DD]
  - **更新日**: [YYYY-MM-DD (不明な場合は「不明」)]
  - **関連要件**: [IDEA可視化ドキュメントの関連要件]

## 3. 探索ログ

### 3.1. 検索クエリ
- [クエリ1]
- [クエリ2]

### 3.2. アクセスURLと取得日時
- [URL1] ([YYYY-MM-DD HH:MM:SS])
- [URL2] ([YYYY-MM-DD HH:MM:SS])
```

### 3) FACTS固定

#### 入力テンプレ

```markdown
# FACTS固定指示

## 1. 参照する探索レポート
[RESEARCH探索レポートのパスを記述してください。]

## 2. 抽出するFactの対象要件
[IDEA可視化ドキュメントから、Factを抽出する対象となる要件を具体的に記述してください。]

## 3. その他
[その他、Fact抽出に関してAIに伝えたい点があれば記述してください。]
```

#### 出力テンプレ

```markdown
# Fact台帳

| Fact ID | 内容 | 出典 | 参照日 | 更新日 | 引用範囲 | 適用範囲 |
|---|---|---|---|---|---|---|
| F-001 | [具体的なFactの内容] | [出典URLまたはドキュメント名] | [YYYY-MM-DD] | [YYYY-MM-DD] | [出典内のセクション/ページ/行番号] | [プロジェクトのどの部分に適用されるか] |
| F-002 | [具体的なFactの内容] | [出典URLまたはドキュメント名] | [YYYY-MM-DD] | [YYYY-MM-DD] | [出典内のセクション/ページ/行番号] | [プロジェクトのどの部分に適用されるか] |
```

### 4) DESIGN作成

#### 入力テンプレ

```markdown
# DESIGN作成指示

## 1. 参照するFact台帳
[Fact台帳のパスを記述してください。]

## 2. 参照するIDEA可視化ドキュメント
[IDEA可視化ドキュメントのパスを記述してください。]

## 3. 設計の重点項目 (任意)
[特定の設計領域 (例: パフォーマンス、セキュリティ) に重点を置きたい場合に記述してください。]

## 4. その他
[その他、設計に関してAIに伝えたい点があれば記述してください。]
```

#### 出力テンプレ

```markdown
# 設計書

## 1. 概要
[システムの全体像と目的を記述します。]

## 2. システム構成

### 2.1. 全体アーキテクチャ
[システム全体の構成図と主要コンポーネントを記述します。]

### 2.2. 各コンポーネント詳細
- [コンポーネント名1]: [詳細説明]
- [コンポーネント名2]: [詳細説明]

## 3. データモデル
[データベースのスキーマ設計やデータ構造を記述します。]

## 4. API仕様

### 4.1. 認証・認可
[APIの認証・認可方式を記述します。]

### 4.2. エンドポイント一覧
- [エンドポイント1]: [詳細説明]
- [エンドポイント2]: [詳細説明]

## 5. UI/UX設計
[ユーザーインターフェースの設計やユーザー体験に関する考慮事項を記述します。]

## 6. セキュリティ設計
[セキュリティ対策、脆弱性対応などを記述します。]

## 7. 運用設計
[監視、ロギング、エラーハンドリング、デプロイ戦略などを記述します。]

# ADRs (Architectural Decision Records)

## ADR-001: [決定事項のタイトル]

### 1. 背景
[なぜこの決定が必要になったかの背景を記述します。]

### 2. 決定事項
[最終的にどのような決定がなされたかを記述します。]

### 3. 理由と考慮事項
[その決定に至った理由、考慮したトレードオフ、メリット・デメリットを記述します。]

### 4. 代替案
[検討された他の選択肢を記述します。]

### 5. 影響
[この決定がシステム全体に与える影響を記述します。]
```

### 5) REVIEW多面監査

#### 入力テンプレ

```markdown
# REVIEW多面監査指示

## 1. 参照する設計書
[設計書のパスを記述してください。]

## 2. 参照するADRs
[ADRsのパスを記述してください。]

## 3. 参照するFact台帳
[Fact台帳のパスを記述してください。]

## 4. 参照するIDEA可視化ドキュメント
[IDEA可視化ドキュメントのパスを記述してください。]

## 5. 監査の重点項目 (任意)
[特定の監査領域 (例: セキュリティ、パフォーマンス) に重点を置きたい場合に記述してください。]

## 6. その他
[その他、監査に関してAIに伝えたい点があれば記述してください。]
```

#### 出力テンプレ

```markdown
# 監査レポート

## 1. 監査概要
[監査の目的と結果の要約を記述します。]

## 2. 指摘事項一覧

### 2.1. P0 (致命的) 指摘
- **ID**: A-001
  - **内容**: [指摘内容]
  - **影響**: [システムへの影響]
  - **推奨修正案**: [推奨される修正案]

### 2.2. P1 (重大) 指摘
- **ID**: A-002
  - **内容**: [指摘内容]
  - **影響**: [システムへの影響]
  - **推奨修正案**: [推奨される修正案]

### 2.3. P2 (軽微) 指摘
- **ID**: A-003
  - **内容**: [指摘内容]
  - **影響**: [システムへの影響]
  - **推奨修正案**: [推奨される修正案]
  - **対応方針**: [人間が決定した対応方針 (例: 修正、許容、将来対応)]

## 3. 監査結果サマリー
- P0指摘数: [数値]
- P1指摘数: [数値]
- P2指摘数: [数値]
```

### 6) BUILD実装

#### 入力テンプレ

```markdown
# BUILD実装指示

## 1. 参照する設計書
[設計書のパスを記述してください。]

## 2. 参照する監査レポート
[監査レポートのパスを記述してください。]

## 3. 実装対象の機能
[設計書から、今回実装する機能を具体的に記述してください。]

## 4. コーディング規約 (任意)
[特定のコーディング規約に従ってほしい場合に記述してください。]

## 5. その他
[その他、実装に関してAIに伝えたい点があれば記述してください。]
```

#### 出力テンプレ

```markdown
# 実装成果物

## 1. ソースコード
[生成されたソースコードのファイルパス、またはGitHubリポジトリのURLを記述します。]

## 2. 単体テストコード
[生成された単体テストコードのファイルパス、またはGitHubリポジトリのURLを記述します。]

## 3. プルリクエスト (PR) 情報
- **PR URL**: [GitHub PRのURL]
- **概要**: [PRの概要]
- **関連設計書**: [関連する設計書へのリンク]
- **テスト結果サマリー**: [単体テスト結果のサマリー]

## 4. CI実行ログ
[CI/CDパイプラインの実行ログへのリンクを記述します。]

## 5. コードカバレッジレポート
[コードカバレッジレポートへのリンクを記述します。]
```

### 7) VERIFY検証

#### 入力テンプレ

```markdown
# VERIFY検証指示

## 1. 参照するソースコード
[ソースコードのGitHubリポジトリURLを記述してください。]

## 2. 参照する設計書
[設計書のパスを記述してください。]

## 3. 参照するIDEA可視化ドキュメント
[IDEA可視化ドキュメントのパスを記述してください。]

## 4. 参照する監査レポート
[監査レポートのパスを記述してください。]

## 5. 検証の重点項目 (任意)
[特定の検証領域 (例: パフォーマンス、セキュリティ、E2E) に重点を置きたい場合に記述してください。]

## 6. その他
[その他、検証に関してAIに伝えたい点があれば記述してください。]
```

#### 出力テンプレ

```markdown
# 検証レポート

## 1. 検証概要
[検証の目的と結果の要約を記述します。]

## 2. 各検証項目結果

### 2.1. 機能要件検証
- **項目**: [機能1]
  - **結果**: PASS/FAIL
  - **詳細**: [検証内容と結果の詳細]

### 2.2. 非機能要件検証
- **項目**: [パフォーマンス]
  - **結果**: PASS/FAIL
  - **詳細**: [検証内容と結果の詳細]

### 2.3. リンク整合性検証
- **項目**: [内部リンク]
  - **結果**: PASS/FAIL
  - **詳細**: [検証内容と結果の詳細]

### 2.4. データ整合性検証
- **項目**: [データCRUD]
  - **結果**: PASS/FAIL
  - **詳細**: [検証内容と結果の詳細]

### 2.5. 未決事項ゼロ化検証
- **項目**: [未決Issueリスト]
  - **結果**: PASS/FAIL
  - **詳細**: [未決Issueの状況]

### 2.6. 危険操作シナリオ検出検証
- **項目**: [不正入力]
  - **結果**: PASS/FAIL
  - **詳細**: [検証内容と結果の詳細]

## 3. E2Eテスト結果サマリー
- **実行結果**: 全体PASS/FAIL
- **テストケース数**: [数値]
- **PASS数**: [数値]
- **FAIL数**: [数値]
- **E2Eテスト実行ログ**: [ログへのリンク]
- **スクリーンショット/動画**: [スクリーンショット/動画へのリンク]

## 4. 検出された問題点
- [問題点1]: [詳細と影響]
- [問題点2]: [詳細と影響]
```

### 8) REPAIR修正ループ

#### 入力テンプレ

```markdown
# REPAIR修正指示

## 1. 参照する検証レポート
[検証レポートのパスを記述してください。]

## 2. 参照するソースコード
[ソースコードのGitHubリポジトリURLを記述してください。]

## 3. 修正対象の問題
[検証レポートから、今回修正する問題を具体的に記述してください。]

## 4. その他
[その他、修正に関してAIに伝えたい点があれば記述してください。]
```

#### 出力テンプレ

```markdown
# 修正成果物

## 1. 修正コミットログ
[GitHubのコミットログへのリンクを記述します。]

## 2. 再検証結果ログ
[CI/CDパイプラインの実行ログへのリンクを記述します。]

## 3. 修正履歴
[GitHub PRコメントやIssue更新履歴へのリンクを記述します。]
```

### 9) RELEASEリリース

#### 入力テンプレ

```markdown
# RELEASEリリース指示

## 1. 参照するソースコード
[リリース対象のソースコードのGitHubリポジトリURLを記述してください。]

## 2. 参照する検証レポート
[最終的な検証レポートのパスを記述してください。]

## 3. リリースバージョン
[リリースするバージョン番号を記述してください。]

## 4. その他
[その他、リリースに関してAIに伝えたい点があれば記述してください。]
```

#### 出力テンプレ

```markdown
# リリース成果物

## 1. デプロイログ
[CI/CDパイプラインのデプロイ実行ログへのリンクを記述します。]

## 2. リリースノート
[GitHub ReleasesのリリースノートURLを記述します。]

## 3. 本番環境ヘルスチェックログ
[本番環境のヘルスチェックログへのリンクを記述します。]
```

### 10) IMPROVE運用改善

#### 入力テンプレ

```markdown
# IMPROVE運用改善指示

## 1. 参照する監視データ
[監視ツール (Datadog, Prometheusなど) のダッシュボードURLやログ分析ツール (Splunk, ElasticSearchなど) の検索結果URLを記述してください。]

## 2. 参照するユーザーフィードバック
[ユーザーフィードバックの収集元 (例: サポートチケット、SNS、アンケート結果) を記述してください。]

## 3. 分析の重点項目 (任意)
[特定の運用改善領域 (例: パフォーマンス改善、バグ修正、新機能要望) に重点を置きたい場合に記述してください。]

## 4. その他
[その他、運用改善に関してAIに伝えたい点があれば記述してください。]
```

#### 出力テンプレ

```markdown
# 運用改善成果物

## 1. 監視ダッシュボード
[監視ダッシュボードのURLを記述します。]

## 2. 分析レポート
[運用データの分析結果をまとめたレポートのパスを記述します。]

## 3. 起票されたIssue
[GitHub Issuesに起票されたIssueのURLを記述します。]
```

## D) 並列運用の役割分担テンプレ（担当/範囲/成果物/統合手順）

### 役割分担の原則

- **重複回避**: 同一テーマの調査や作業を複数のAIが同時に行わない。
- **専門性活用**: 各AIの得意分野 (推論、コード生成、情報収集など) を最大限に活かす。
- **独立性と連携**: 各AIは独立して作業を進めるが、明確なインターフェースと統合手順を通じて連携する。
- **監査と検証**: 異なるAIが互いの成果物を監査・検証することで、品質と信頼性を向上させる。

### 役割分担テンプレ

| 担当AI | 役割 | 担当範囲 | 成果物 | 統合手順 |
|---|---|---|---|---|
| **GPT-5.2** | IDEA可視化、要件抽出、テストケース生成 | プロジェクト初期要件定義、検証テストケース設計 | IDEA可視化ドキュメント、検証テストケース | IDEA可視化ドキュメントはClaude 3.5 Sonnetがクロスチェック。検証テストケースはPlaywright MCPで実行。 |
| **Perplexity / Gemini 2.5 Pro** | RESEARCH探索、情報収集・整理 | 最新技術動向、API仕様、ベストプラクティス、競合調査 | RESEARCH探索レポート | RAGシステムを通じて情報整理、GPT-5.2が要約・関連性評価。 |
| **Gemini 2.5 Pro** | FACTS固定、Fact台帳作成、運用改善分析 | 探索情報からのFact抽出、Fact台帳生成、運用データ分析、改善点特定 | Fact台帳、運用改善分析レポート、GitHub Issue | Fact台帳はDeepSeek-R1が整合性チェック。運用改善IssueはDeepSeek-R1が起票。 |
| **Claude 3.5 Sonnet** | DESIGN作成、設計書生成、監査レポート作成 | システム設計、ADR作成、監査レポートの人間向け整形 | 設計書、ADRs、監査レポート | 設計書・ADRはGPT-5.2が論理整合性チェック。監査レポートはDeepSeek-R1の指摘を基に作成。 |
| **DeepSeek-R1** | REVIEW多面監査、REPAIR原因分析 | 設計書の矛盾・脆弱性監査、検証問題の根本原因分析 | 監査レポートの指摘事項、修正計画のインプット | 監査レポートの指摘事項はClaude 3.5 Sonnetが整形。修正計画はClaude Codeにインプット。 |
| **Claude Code / Cursor** | BUILD実装、REPAIR修正 | ソースコード生成、単体テスト生成、コード修正 | ソースコード、単体テストコード、PR | CI/CDと連携し、GPT-5.2がコードレビューコメント生成。 |

### 領域分割テンプレ (RESEARCH探索用)

RESEARCH探索工程において、複数のAIが重複して情報を収集しないよう、以下の領域分割テンプレを使用します。

```markdown
# RESEARCH探索 領域分割指示

## 1. 探索テーマ
[例: 認証認可方式、データ永続化技術、フロントエンドフレームワーク]

## 2. 担当AI
[例: Perplexity (Web検索担当), Gemini 2.5 Pro (ドキュメント解析担当)]

## 3. 探索対象領域
- **Perplexity**: [例: 最新のOAuth 2.0/OpenID Connectの仕様、各クラウドプロバイダーの認証サービス]
- **Gemini 2.5 Pro**: [例: 特定の認証ライブラリの公式ドキュメント、実装例、セキュリティに関する論文]

## 4. 期待する成果物
[例: 各認証方式の比較表、選定基準、実装上の注意点]
```

## E) 人間作業を最小化する仕組み

人間作業を最小化するためには、AIによる自動化と、人間が介入すべきポイントの明確化、そしてその介入コストの最小化が重要です。

### 1. 自動チェックとGate条件

各工程の終わりに設定された**Gate条件**は、AIが自動的に成果物の品質を評価し、次の工程に進むべきかを判断する仕組みです。これにより、人間が全ての成果物を詳細にチェックする手間を省き、問題がある場合にのみ介入を促します。

- **AIによる自動判定**: 各工程の担当AIまたは補助AIが、Gate条件に基づいて成果物を評価し、PASS/FAILを判定します。
- **早期フィードバック**: 問題が検出された場合、AIは直ちにフィードバックを生成し、前の工程に戻るか、修正ループに入るかを決定します。

### 2. 差分レビューの最小化

コードレビューやドキュメントレビューにおいて、人間が全ての変更点を詳細に確認するのではなく、AIが生成した差分情報とレビューコメントに焦点を当てることで、レビューコストを大幅に削減します。

- **AIによる差分分析**: BUILD実装工程では、**GPT-5.2**がCIの結果とコードの差分を基に、設計意図との乖離、潜在的なバグ、パフォーマンス問題、セキュリティ脆弱性などを指摘するコードレビューコメントを生成します。
- **人間は差分のみレビュー**: 人間はAIのレビューコメントを参考に、コードの差分のみに焦点を当ててレビューを行い、承認または修正指示を行います。

### 3. 承認の最小セット

重要な意思決定ポイントでのみ人間が承認を行うことで、不必要な承認プロセスを排除し、開発速度を向上させます。

- **最終承認**: IDEA可視化、DESIGN作成、VERIFY検証、RELEASEリリースといった主要な工程の最終段階でのみ、人間が最終承認を行います。
- **自動承認**: Gate条件をPASSした中間成果物については、AIが自動的に承認し、次の工程に進みます。
- **承認ログ**: 全ての承認は、GitHub IssueのコメントやSlackの承認スタンプなど、証跡として残る形で記録されます。

### 4. 失敗時の自動介入とエスカレーション

AIがGate条件を満たせない場合や、REPAIR修正ループが規定回数を超えた場合など、AIが自律的に解決できない状況では、自動的に人間にエスカレーションし、介入を促します。

- **アラート通知**: AIは、失敗状況、原因分析、推奨される次のアクションを含むアラートを人間に通知します。
- **介入ポイントの明確化**: 人間が介入すべき具体的なポイント (例: 3回失敗時の介入、P0/P1指摘への対応方針決定) を明確に定義します。

## F) 失敗時の分岐（情報不足/矛盾/検証FAIL/合意不成立/外部仕様変更）

AI駆動開発ワークフローにおいて発生しうる主要な失敗パターンと、それに対するAIの対応、人間の介入ポイントを明確にします。

### 1. 情報不足

- **発生工程**: RESEARCH探索、FACTS固定、DESIGN作成など
- **AIの対応**: 探索範囲の拡大、追加情報の要求、関連するFactの再確認を試みる。不足している情報が特定できない場合は、人間にエスカレーション。
- **人間の最小アクション**: 追加探索の指示、情報源の提供、探索範囲の調整。

### 2. 矛盾

- **発生工程**: IDEA可視化、FACTS固定、DESIGN作成、REVIEW多面監査など
- **AIの対応**: 矛盾する情報の特定、影響範囲の分析、矛盾解消のための代替案の提示。自己解決できない場合は、人間にエスカレーション。
- **人間の最小アクション**: 矛盾する情報の優先順位付け、意思決定、AIへの指示。

### 3. 検証FAIL

- **発生工程**: BUILD実装、VERIFY検証、REPAIR修正ループなど
- **AIの対応**: エラーログの分析、問題の根本原因特定、修正計画の立案、コード修正、再検証 (REPAIR修正ループ)。
- **人間の最小アクション**: REPAIR修正ループが3回失敗した場合の介入、根本原因分析と修正方針の再検討。

### 4. 合意不成立

- **発生工程**: IDEA可視化、DESIGN作成、REVIEW多面監査など (人間の承認が必要な工程)
- **AIの対応**: 人間からのフィードバックを基に成果物を修正し、再度承認を求める。合意形成のための追加情報や代替案を提示。
- **人間の最小アクション**: 議論の主導、意思決定、AIへの明確な指示。

### 5. 外部仕様変更

- **発生工程**: 全ての工程 (特にRESEARCH探索、DESIGN作成、BUILD実装)
- **AIの対応**: 変更された外部仕様を認識し、影響範囲を分析。関連する成果物 (IDEA可視化ドキュメント、Fact台帳、設計書、コード) の更新を提案。必要に応じて、RESEARCH探索から再開。
- **人間の最小アクション**: 外部仕様変更の通知、影響範囲の確認、変更への対応方針決定。

## G) 根拠URL一覧（重要項目は公式/一次情報優先。参照日、可能なら更新日も）

- [1] **Claude 3.5 Sonnet**: [https://www.anthropic.com/news/claude-3-5-sonnet](https://www.anthropic.com/news/claude-3-5-sonnet) (参照日: 2026-01-12)
- [2] **GPT-5.2 (仮称)**: [https://openai.com/](https://openai.com/) (参照日: 2026-01-12, 更新日: 不明) - *GPT-5.2は仮称であり、現時点での最新情報に基づき性能を想定しています。*
- [3] **Gemini 2.5 Pro**: [https://blog.google/technology/ai/google-gemini-ai-model-updates/](https://blog.google/technology/ai/google-gemini-ai-model-updates/) (参照日: 2026-01-12)
- [4] **DeepSeek-R1**: [https://www.deepseek.com/](https://www.deepseek.com/) (参照日: 2026-01-12, 更新日: 不明) - *DeepSeek-R1は仮称であり、現時点での最新情報に基づき性能を想定しています。*
- [5] **Perplexity AI**: [https://www.perplexity.ai/](https://www.perplexity.ai/) (参照日: 2026-01-12)
- [6] **Claude Code**: [https://www.anthropic.com/news/claude-code-announcement](https://www.anthropic.com/news/claude-code-announcement) (参照日: 2026-01-12) - *Claude Codeは仮称であり、現時点での最新情報に基づき性能を想定しています。*
- [7] **Cursor (AI Native IDE)**: [https://cursor.sh/](https://cursor.sh/) (参照日: 2026-01-12)
- [8] **GitHub Actions**: [https://docs.github.com/ja/actions](https://docs.github.com/ja/actions) (参照日: 2026-01-12)
- [9] **Playwright**: [https://playwright.dev/](https://playwright.dev/) (参照日: 2026-01-12)
- [10] **MCP (Model Context Protocol) Server**: [https://www.manus.im/mcp](https://www.manus.im/mcp) (参照日: 2026-01-12) - *MCPはManusの提供するプロトコルであり、一般的な情報源として記載しています。*
